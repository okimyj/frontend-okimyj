(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[847],{4238:function(n,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/visitorBooks",function(){return r(5627)}])},5627:function(n,e,r){"use strict";r.r(e),r.d(e,{default:function(){return ni}});var t,o,a,l,i=r(5893),c=r(2729),s=r(3831),u=r(2864),d=r(9828),h=r(3977);let f=r(770).Z.apps.length?(0,h.Mq)():(0,h.ZF)({apiKey:"AIzaSyDHCx8uv4Nh4abMOJqkmKby9trTZ4vk4O0",authDomain:"okimyj-portfolio.firebaseapp.com",projectId:"okimyj-portfolio",storageBucket:"okimyj-portfolio.appspot.com",messagingSenderId:"1021928101557",appId:"1:1021928101557:web:34b7adb9a4211aed9b90fc"},"okimyj-portfolio");var p=()=>{let n=n=>(0,d.hJ)((0,d.ad)(f),n),e=(n,e)=>(0,d.JU)((0,d.ad)(f),n,e),r=async(e,r)=>await (0,d.ET)(n(e),r),t=async(e,r,t,o)=>{let a=n(e);try{let n=t&&r?(0,d.IO)(a,t,r):t?(0,d.IO)(a,t):r?(0,d.IO)(a,r):(0,d.IO)(a);await (0,d.cf)(n,n=>{null==o||o(n)})}catch(n){console.log(n)}};return{getCollection:n,firebaseAddDoc:r,firebaseUpdateDoc:async(n,r,t)=>await (0,d.r7)(e(n,r),t),firebaseDeleteDoc:async(n,r)=>await (0,d.oe)(e(n,r)),firebaseGetDocs:async n=>{if(f)try{let e=(0,d.IO)((0,d.hJ)((0,d.ad)(f),n)),r=await (0,d.PL)(e);return r.forEach(n=>console.log(n.id," // ",n.data())),r}catch(n){console.log(n)}},firebaseGetDocsRealtime:t}},g=n=>{let{firebaseAddDoc:e,firebaseUpdateDoc:r,firebaseDeleteDoc:t}=p();return{addDoc:r=>t=>{console.log("addDoc : ",t),e(n,{...t,createdAt:Date.now().toString()}).then(()=>{null==r||r()})},updateDoc:(e,t,o)=>{console.log("updateDoc - id : ",e," data : ",t),r(n,e,{...t,createdAt:Date.now().toString()}).then(()=>{null==o||o()})},deleteDoc:(e,r)=>{console.log("deleteDoc id : ",e),t(n,e).then(n=>{console.log("deleteDoc result : ",n),null==r||r()})}}},v=r(2913),b=r(6829);function x(){let n=(0,c._)(["\n  border: 1px solid ",";\n  background-color: ",";\n  border-radius: ",";\n  padding: 0 ",";\n  :hover {\n    background-color: ",";\n  }\n"]);return x=function(){return n},n}var j=n=>(0,i.jsx)(m,{...n,children:n.children});let m=b.Z.button(x(),v.r.colors.primary,v.r.colors.list_background,(0,s.hO)(3),(0,s.hO)(10),v.r.colors.secondary);function w(){let n=(0,c._)(["\n  margin-right: ",";\n"]);return w=function(){return n},n}function y(){let n=(0,c._)(["\n  border: 1px solid #eee;\n  border-radius: ",";\n  outline-color: ",";\n"]);return y=function(){return n},n}var O=n=>{let{title:e,register:r,...t}=n;return"writer"===e&&console.log("rest : ",t.value),(0,i.jsxs)("div",{children:[e?(0,i.jsx)(k,{children:e}):"",(0,i.jsx)(_,{...r,...t})]})};let k=b.Z.span(w(),(0,s.hO)(10)),_=b.Z.input(y(),(0,s.hO)(5),v.r.colors.primary);var E=r(7856),D=r.n(E),Z=r(7294),S=r(5152),C=r.n(S);function I(){let n=(0,c._)(["\n  border: none;\n  color: ",";\n  background-color: transparent;\n"]);return I=function(){return n},n}var M=n=>(0,i.jsx)(z,{...n,children:n.children});let z=b.Z.button(I(),n=>{var e;return null!==(e=n.color)&&void 0!==e?e:"#000"});function A(){return(A=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}return n}).apply(this,arguments)}var P=function(n){return Z.createElement("svg",A({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},n),t||(t=Z.createElement("path",{stroke:"currentColor",d:"m17.093 1.293-11.2 11.2a1 1 0 0 0-.242.391l-1.6 4.8A1 1 0 0 0 5 19a1 1 0 0 0 .316-.051l4.8-1.6a1 1 0 0 0 .391-.242l11.2-11.2a1 1 0 0 0 0-1.414l-3.2-3.2a1 1 0 0 0-1.414 0zM9.26 15.526l-2.679.893.893-2.679L17.8 3.414 19.586 5.2zM2 22a1 1 0 0 0 1 1h17a1 1 0 0 0 0-2H3a1 1 0 0 0-1 1z"})))};function L(){return(L=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}return n}).apply(this,arguments)}var N=function(n){return Z.createElement("svg",L({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 29 29"},n),o||(o=Z.createElement("path",{stroke:"currentColor",d:"M19.795 27H9.205a2.99 2.99 0 0 1-2.985-2.702L4.505 7.099A1 1 0 0 1 5.5 6h18a1 1 0 0 1 .995 1.099L22.78 24.297A2.99 2.99 0 0 1 19.795 27zM6.604 8 8.21 24.099a1 1 0 0 0 .995.901h10.59a1 1 0 0 0 .995-.901L22.396 8z"})),a||(a=Z.createElement("path",{d:"M26 8H3a1 1 0 1 1 0-2h23a1 1 0 1 1 0 2M14.5 23a1 1 0 0 1-1-1V11a1 1 0 1 1 2 0v11a1 1 0 0 1-1 1m-3.501 0a1 1 0 0 1-.995-.91l-1-11a1 1 0 0 1 .905-1.086 1.003 1.003 0 0 1 1.087.906l1 11a1 1 0 0 1-.997 1.09m7.002 0a1 1 0 0 1-.997-1.09l1-11c.051-.55.531-.946 1.087-.906a1 1 0 0 1 .905 1.086l-1 11a1 1 0 0 1-.995.91"})),l||(l=Z.createElement("path",{d:"M19 8h-9a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1m-8-2h7V4h-7z"})))};function T(){let n=(0,c._)(["\n  border-radius: ",";\n  padding: ",";\n  display: flex;\n  flex-direction: column;\n  margin-top: ",";\n  border: 1px solid ",";\n  background-color: ",";\n\n  .quill {\n    margin: "," 0;\n    background-color: #fff;\n  }\n"]);return T=function(){return n},n}function H(){let n=(0,c._)(["\n  display: flex;\n  justify-content: space-between;\n"]);return H=function(){return n},n}function q(){let n=(0,c._)(["\n  display: flex;\n  div {\n    margin-right: ",";\n  }\n  button:not(:first-of-type) {\n    margin-left: ",";\n  }\n"]);return q=function(){return n},n}function B(){let n=(0,c._)(["\n  padding: ",";\n"]);return B=function(){return n},n}function J(){let n=(0,c._)([""]);return J=function(){return n},n}let V=C()(async()=>await Promise.all([r.e(937),r.e(876),r.e(167)]).then(r.t.bind(r,1167,23)),{loadableGenerated:{webpack:()=>[1167]},ssr:!1});var G=n=>{var e,r;let{data:t}=n,[o,a]=(0,Z.useState)(!1),[l,c]=(0,Z.useState)(null!==(e=t.contents)&&void 0!==e?e:""),[s,d]=(0,Z.useState)(""),{updateDoc:h,deleteDoc:f}=g(u.hf),p=()=>{a(!o),d("")};return(0,i.jsxs)(X,{children:[(0,i.jsxs)(F,{children:[(0,i.jsxs)("span",{children:["writer : ",t.writer]}),o?(0,i.jsx)(j,{onClick:p,children:"취소"}):(0,i.jsxs)(K,{children:[(0,i.jsx)(M,{onClick:p,color:v.r.colors.primary,children:(0,i.jsx)(P,{width:"15",height:"15"})}),(0,i.jsx)(M,{onClick:()=>{f(t.id,p)},color:v.r.colors.primary,children:(0,i.jsx)(N,{width:"15",height:"15"})})]})]}),o?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(V,{onChange:n=>{c(n)},value:l}),(0,i.jsxs)(K,{children:[(0,i.jsx)(O,{title:"password",onChange:n=>{d(n.currentTarget.value)},value:s}),(0,i.jsx)(j,{onClick:()=>{if(s!==t.password){alert("비밀번호가 틀립니다.");return}h(t.id,{...t,contents:l},()=>{p()})},children:"완료"})]})]}):(0,i.jsx)(U,{dangerouslySetInnerHTML:{__html:D().sanitize(null!==(r=t.contents)&&void 0!==r?r:"")}})]})};let X=b.Z.div(T(),(0,s.hO)(20),(0,s.hO)(10),(0,s.hO)(10),v.r.colors.tertiary,v.r.colors.list_background,(0,s.hO)(10)),F=b.Z.div(H()),K=b.Z.div(q(),(0,s.hO)(10),(0,s.hO)(10)),U=b.Z.span(B(),(0,s.hO)(5));b.Z.span(J());var Q=(n,e)=>{let{firebaseGetDocsRealtime:r}=p(),[t,o]=(0,Z.useState)([]),a=async()=>{r(n,e,null,n=>{if(!n)return;let e=[];n.forEach(n=>{e.push({id:n.id,...n.data()})}),o(e)})};return(0,Z.useEffect)(()=>{a()},[]),{docs:t}},R=()=>{let{docs:n}=Q(u.hf,(0,d.Xo)("createdAt","desc"));return(0,i.jsx)("section",{children:null==n?void 0:n.map(n=>(0,i.jsx)(G,{data:n},n.id))})},W=r(7536);function Y(){let n=(0,c._)(["\n  .quill {\n    margin: "," 0;\n    background-color: #fff;\n  }\n"]);return Y=function(){return n},n}function $(){let n=(0,c._)(["\n  display: flex;\n  div:not(:first-of-type) {\n    margin-left: ",";\n  }\n"]);return $=function(){return n},n}r(8645);let nn=C()(async()=>await Promise.all([r.e(937),r.e(876),r.e(167)]).then(r.t.bind(r,1167,23)),{loadableGenerated:{webpack:()=>[1167]},ssr:!1});var ne=()=>{let{addDoc:n}=g(u.hf),{register:e,reset:r,setValue:t,trigger:o,handleSubmit:a,getValues:l}=(0,W.cI)(),[c,s]=(0,Z.useState)("");return(0,Z.useEffect)(()=>{t("contents","<p><br></p>"===c?"":c),o("contents"),console.log("getValues : ",l())},[c]),(0,i.jsxs)(nr,{onSubmit:a(n(()=>{r(),s("")})),children:[(0,i.jsxs)(nt,{children:[(0,i.jsx)(O,{title:"writer",register:e("writer")}),(0,i.jsx)(O,{title:"password",type:"password",register:e("password")})]}),(0,i.jsx)(nn,{onChange:n=>{s(n)},value:c}),(0,i.jsx)(j,{children:"Submit"})]})};let nr=b.Z.form(Y(),(0,s.hO)(10)),nt=b.Z.div($(),(0,s.hO)(10));function no(){let n=(0,c._)(["\n  margin-top: ",";\n"]);return no=function(){return n},n}var na=()=>(0,i.jsxs)(nl,{children:[(0,i.jsx)(ne,{}),(0,i.jsx)(R,{})]});let nl=b.Z.div(no(),(0,s.hO)(20));var ni=()=>(0,i.jsx)(na,{})}},function(n){n.O(0,[16,423,888,774,179],function(){return n(n.s=4238)}),_N_E=n.O()}]);